### 生活案例

手机操作问题



现在对不同手机类型的不同品牌实现操作编程(比如:开机、关机、上网，打电话等)，如图:

![](https://wendy-image.oss-cn-shanghai.aliyuncs.com/19-07-21/1563697060637.png)

那么如果使用上述思维完成需求，类图如下：

![](https://wendy-image.oss-cn-shanghai.aliyuncs.com/19-07-21/1563698115775.png)

1. 扩展性问题(类爆炸)，如果我们再增加手机的样式(旋转式)，就需要增加各个品牌手机的类，同样如果我们增加一个手机品牌，也要在各个手机样式类下增加。
2. 违反了单一职责原则，当我们增加手机样式时，要同时增加所有品牌的手机，这样增加了代码维护成本



### 桥接模式基本原理

1. **桥接模式(Bridge模式)**是指：将 实现与 抽象放在两个不同的类层次中，使两个层次可以独立改变。
2. 是一种结构型设计模式
3. Bridge模式基于**类的最小设计原则**，通过使用封装、聚合及继承等行为让不同的类承担不同的职责。它的主要特点是把抽象(Abstraction)与行为实现(Implementation)分离开来，从而可以保持各部分的独立性以及应对他们的功能扩展

![](https://wendy-image.oss-cn-shanghai.aliyuncs.com/19-07-21/1563700650549.png)

代码实现

品牌接口，和两个具体的实现类

```java
public interface Brand {
    void open();
    void close();
    void call();
}
//小米手机实现
public class XiaoMi implements Brand {
    @Override
    public void open() {
        System.out.println("小米手机开机");
    }
    @Override
    public void close() {
        System.out.println("小米手机关机");
    }
    @Override
    public void call() {
        System.out.println("小米手机打电话");
    }
}
//Vivo手机实现
public class Vivo implements Brand {
    @Override
    public void open() {
        System.out.println("Vivo手机开机");
    }
    @Override
    public void close() {
        System.out.println("Vivo手机关机");
    }
    @Override
    public void call() {
        System.out.println("Vivo手机打电话");
    }
}
```
手机类的实现，组合品牌

```java
public abstract class Phone {
    //组合品牌
    private Brand brand;

    public Phone(Brand brand) {
        this.brand = brand;
    }
    protected void open(){
        this.brand.open();
    }
    protected void close(){
        this.brand.close();
    }
    protected void call(){
        this.brand.call();
    }
}
```
实现手机类，构建具体的手机，可以实现不同的手机样式

```java
public class FoldePhone extends Phone{
    public FoldePhone(Brand brand) {
        super(brand);
    }
    protected void open(){
        super.open();
        System.out.println("折叠样式的手机开机");
    }
    protected void close(){
        super.close();
        System.out.println("折叠样式的手机关机");;
    }
    protected void call(){
        super.call();
        System.out.println("折叠样式的手机打电话");
    }
}
//或者直板样式
public class UpRightPhone extends Phone{
    public UpRightPhone(Brand brand) {
        super(brand);
    }
    protected void open(){
        super.open();
        System.out.println("旋转样式的手机开机");
    }
    protected void close(){
        super.close();
        System.out.println("旋转样式的手机关机");;
    }
    protected void call(){
        super.call();
        System.out.println("旋转样式的手机打电话");
    }
}
```


### 桥接模式在JDBC的源码解析

Jdbc 的 Driver接口，如果从桥接模式来看，Driver就是一个接口，下面可以有
MySQL的Driver，Oracle的Driver，这些就可以当做实现接口类



桥接模式的注意事项

桥接模式的注意事项和细节
1) 实现了抽象和实现部分的分离，从而极大的提供了系统的灵活性，让抽象部分和实
现部分独立开来，这有助于系统进行分层设计，从而产生更好的结构化系统。
2) 对于系统的高层部分，只需要知道抽象部分和实现部分的接口就可以了，其它的部
分由具体业务来完成。
3) 桥接模式替代多层继承方案，可以减少子类的个数，降低系统的管理和维护成本。
4) 桥接模式的引入增加了系统的理解和设计难度，由于聚合关联关系建立在抽象层，
要求开发者针对抽象进行设计和编程
5) 桥接模式要求正确识别出系统中两个独立变化的维度，因此其使用范围有一定的局
限性，即需要有这样的应用场景。



桥接模式的其他应用场景

桥接模式其它应用场景
1) 对于那些不希望使用继承或因为多层次继承导致系统类的个数急剧增加的系统，桥
接模式尤为适用.
2) 常见的应用场景:
-JDBC驱动程序
-银行转账系统
转账分类: 网上转账，柜台转账，AMT转账
转账用户类型：普通用户，银卡用户，金卡用户..
-消息管理
消息类型：即时消息，延时消息
消息分类：手机短信，邮件消息，QQ消息...